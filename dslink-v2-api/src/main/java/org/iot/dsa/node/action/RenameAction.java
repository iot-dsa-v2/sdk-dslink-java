package org.iot.dsa.node.action;

import org.iot.dsa.dslink.ActionResults;
import org.iot.dsa.node.DSInfo;
import org.iot.dsa.node.DSMap;
import org.iot.dsa.node.DSMetadata;
import org.iot.dsa.node.DSString;

/**
 * Renames a dynamic child of a node.
 *
 * @author Aaron Hansen
 */
public class RenameAction extends DSAction {

    ///////////////////////////////////////////////////////////////////////////
    // Class Fields
    ///////////////////////////////////////////////////////////////////////////

    public static final RenameAction INSTANCE = new RenameAction();
    private static final String NEW_NAME = "New Name";
    public static final String RENAME = "Rename";

    ///////////////////////////////////////////////////////////////////////////
    // Instance Fields
    ///////////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////////////
    // Constructors
    ///////////////////////////////////////////////////////////////////////////

    public RenameAction() {
        addParameter(NEW_NAME, DSString.NULL, null);
        setImmutable(true);
    }

    ///////////////////////////////////////////////////////////////////////////
    // Public Methods
    ///////////////////////////////////////////////////////////////////////////

    @Override
    public ActionResults invoke(DSIActionRequest request) {
        String newName = request.getParameters().get(NEW_NAME, null);
        request.getTargetInfo().getParent().rename(request.getTargetInfo(), newName);
        return null;
    }

    @Override
    public void prepareParameter(DSInfo target, DSMap parameter) {
        parameter.put(DSMetadata.DEFAULT, target.getName());
    }

    ///////////////////////////////////////////////////////////////////////////
    // Protected Methods
    ///////////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////////////
    // Package / Private Methods
    ///////////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////////////
    // Inner Classes
    ///////////////////////////////////////////////////////////////////////////

    ///////////////////////////////////////////////////////////////////////////
    // Initialization
    ///////////////////////////////////////////////////////////////////////////

}
